{% extends "action_analytics/base.html" %}
{% block content %}
<h2>Overview (Last {{ days }} days)</h2>

<div class="stat-cards">
    {% include "_includes/stat_card.html" with value=data.total_actions title="Total Actions" color="teal" %}
    {% include "_includes/stat_card.html" with value=data.unique_patients title="Unique Patients" color="blue" %}
    {% include "_includes/stat_card.html" with value=data.avg_duration_seconds|floatformat:0 title="Avg Duration" subtitle="seconds" color="green" %}
</div>

<h3>Actions by Module</h3>
<table class="data-table">
    <tr><th>Module</th><th>Count</th></tr>
    {% for item in data.by_module %}
    <tr><td>{{ item.module }}</td><td>{{ item.count }}</td></tr>
    {% empty %}
    <tr><td colspan="2">No data available</td></tr>
    {% endfor %}
</table>

<h3>Top Users</h3>
<table class="data-table">
    <tr><th>User</th><th>Actions</th></tr>
    {% for item in data.by_user %}
    <tr><td>{{ item.user__username }}</td><td>{{ item.count }}</td></tr>
    {% empty %}
    <tr><td colspan="2">No data available</td></tr>
    {% endfor %}
</table>
{% endblock %}
